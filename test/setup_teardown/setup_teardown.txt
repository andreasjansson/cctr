%skip(Unix only) if: test "$OS" = "Windows_NT"
===
setup teardown verbose output
===
cctr $CCTR_FIXTURE_DIR/tests --no-color -v 2>&1
---
starting tests/_setup: create marker file
✓ tests/_setup: create marker file {{ t1 }}s
starting tests/use_setup: verify setup ran
✓ tests/use_setup: verify setup ran {{ t2 }}s
starting tests/_teardown: cleanup marker
✓ tests/_teardown: cleanup marker {{ t3 }}s

✓ tests: 3/3 tests passed in {{ suite_time }}s

All 3 tests passed in {{ total_time }}s
---
where
* t1 < 5
* t2 < 5
* t3 < 5
* suite_time < 5
* total_time < 5

===
setup teardown non-verbose output
===
cctr $CCTR_FIXTURE_DIR/tests --no-color 2>&1
---
...

✓ tests: 3/3 tests passed in {{ suite_time }}s

All 3 tests passed in {{ total_time }}s
---
where
* suite_time < 5
* total_time < 5

===
list mode shows setup and teardown
===
cctr $CCTR_FIXTURE_DIR/tests --list
---

tests [setup, teardown]
  use_setup: 1 test(s)
    - verify setup ran

===
setup failure causes non-zero exit code
===
cctr $CCTR_FIXTURE_DIR/failing_setup --no-color 2>&1; echo "exit: $?"
---
F

⊘ failing_setup: Setup failed (2 tests skipped)

Failures:

✗ failing_setup/_setup: setup that fails
  {{ path }}
  Command: echo "wrong output"

-expected output
+wrong output

Summary: 0 passed, 0 failed, 2 skipped in {{ time }}s
exit: 1
